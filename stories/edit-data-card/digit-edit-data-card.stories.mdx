import * as yup from "yup";
import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import {
    DigitEditDataCard,
    DigitTextField,
    DigitCheckbox,
    DigitTextArea,
    DigitDatePicker
} from "../../src";
import DigitProvidersDecorator from "../../.storybook/DigitProvidersDecorator";

<Meta
    title="Elements|DigitEditDataCard"
    component={DigitEditDataCard}
/>

# DigitEditDataCard

The easier, but not as customizable way, to create a form as opposed to `DigitForm`. What you will get is a DigitDesign.Card and input component that you specify. You should use `yup` for validation. It's super easy, you can read all about it here: https://github.com/jquense/yup. In the `onSubmit` function, you get two props. `values`, which is the data from the form. `actions` has a bunch cool functions, however, the only useful function is `resetForm`. More information is available here: https://jaredpalmer.com/formik/docs/api/formik.

<Preview>
    <Story name="Normal">
        <DigitEditDataCard
            initialValues={{
                firstname: "",
                surname: "",
                email: "",
                agreement: false
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstname: yup.string().required(),
                surname: yup.string().required(),
                email: yup.string().required(),
                agreement: yup.boolean().oneOf([true], 'Field must be checked').required()
            })}
            titleText={"Title"}
            submitText={"Submit"}
            keysOrder={["firstname", "surname", "email", "agreement"]}
            keysComponentData={{
                firstname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname"
                    }
                },
                surname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Surname"
                    }
                },
                email: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Email"
                    }
                },
                agreement: {
                    component: DigitCheckbox,
                    componentProps: {
                        primary: true,
                        label: "Agreement"
                    }
                }
            }}
            submitButton={{    
                text: "Skicka",
            }}
        />
    </Story>
    <Story name="Other values">
        <DigitEditDataCard
            initialValues={{
                firstname: "",
                surname: "",
                email: "",
                agreement: false
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstname: yup.string().required(),
                email: yup.string().required(),
                agreement: yup.boolean().oneOf([true], 'Field must be checked').required()
            })}
            titleText={"Other title"}
            submitText={"Submit"}
            keysOrder={["firstname", "surname", "email", "agreement"]}
            keysComponentData={{
                firstname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname"
                    }
                },
                surname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Surname"
                    }
                },
                email: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Email"
                    }
                },
                agreement: {
                    component: DigitCheckbox,
                    componentProps: {
                        primary: true,
                        label: "Agreement"
                    }
                }
            }}
        />
    </Story>
</Preview>

## Initial values

<Preview>
    <Story name="Normal initial">
        <DigitEditDataCard
            initialValues={{
                firstname: "Smurf",
                surname: "Smurfsson",
                email: "email@email.com",
                agreement: false
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstname: yup.string().required(),
                surname: yup.string().required(),
                email: yup.string().required(),
                agreement: yup.boolean().oneOf([true], 'Field must be checked').required()
            })}
            titleText={"Title"}
            submitText={"Submit"}
            keysOrder={["firstname", "surname", "email", "agreement"]}
            keysComponentData={{
                firstname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname"
                    }
                },
                surname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Surname"
                    }
                },
                email: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Email"
                    }
                },
                agreement: {
                    component: DigitCheckbox,
                    componentProps: {
                        primary: true,
                        label: "Agreement"
                    }
                }
            }}
        />
    </Story>
    <Story name="Other values initial">
        <DigitEditDataCard
            initialValues={{
                name: "digIT 'Smurf' Hackerman",
                email: "email@email.com",
                agreement: false
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                name: yup.string().required(),
                email: yup.string().required(),
                agreement: yup.boolean().oneOf([true], 'Field must be checked').required()
            })}
            titleText={"Title"}
            submitText={"Send"}
            keysOrder={["name", "email", "agreement"]}
            keysComponentData={{
                name: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname 'Nick' Lastname"
                    }
                },
                email: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Email"
                    }
                },
                agreement: {
                    component: DigitCheckbox,
                    componentProps: {
                        primary: true,
                        label: "GDPR"
                    }
                }
            }}
        />
    </Story>
</Preview>

## Other components

<Preview>
    <Story name="Normal components">
        <DigitEditDataCard
            initialValues={{
                firstname: "",
                surname: "",
                date: ""
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstname: yup.string().required(),
                surname: yup.string().required(),
                date: yup.string().required()
            })}
            titleText={"Title"}
            submitText={"Submit"}
            keysOrder={["firstname", "surname", "date"]}
            keysComponentData={{
                firstname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname"
                    }
                },
                surname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Surname"
                    }
                },
                date: {
                    component: DigitDatePicker,
                    componentProps: {
                        upperLabel: "Email"
                    }
                }
            }}
        />
    </Story>
    <Story name="Other values components">
        <DigitEditDataCard
            initialValues={{
                firstname: "digIT 'Smurf' Hackerman",
                email: "email@email.com",
                agreement: false
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstname: yup.string().required(),
                other: yup.string().required()
            })}
            titleText={"Title"}
            submitText={"Send"}
            keysOrder={["firstname", "other"]}
            keysComponentData={{
                firstname: {
                    component: DigitTextField,
                    componentProps: {
                        upperLabel: "Firstname 'Nick' Lastname"
                    }
                },
                other: {
                    component: DigitTextArea,
                    componentProps: {
                        upperLabel: "Other",
                        rows: "6"
                    }
                }
            }}
        />
    </Story>
</Preview>

<Props of={DigitEditDataCard} />
