import { Fragment, useState } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs/blocks";
import {
    useDigitFormField,
    DigitForm,
    DigitTextField,
    DigitLayout,
    DigitButton,
    DigitSelect,
    DigitRadioButtonGroup
} from "../../src";
import * as yup from "yup";

<Meta title="Forms/useDigitFormField" />

# useDigitFormField

Used to be hooked up with a `DigitForm`. It handles `value`/`onChange` behavior for you. The hook returns the following object:

| **Name**         | **Type** | **Description**                                                          |
| ---------------- | -------- | ------------------------------------------------------------------------ |
| **value**        | _any_    | The value of the form field                                              |
| **onChange**     | _func_   | The function that is needed to update value in the form field            |
| **onBlur**       | _func_   | Called when then input loses focus                                       |
| **error**        | _bool_   | True if something is incorrect in the form field                         |
| **errorMessage** | _string_ | The error message. Specified in the yup validation schema in `DigitForm` |

It's often easier, as seen with the example, to just spread the values directly into your input.

<Canvas>
    <Story name="example">
        {() => {
            const TextField = () => {
                const fieldValues = useDigitFormField("name");
                return (
                    <DigitTextField
                        {...fieldValues}
                        upperLabel="Your name"
                        filled
                    />
                );
            };
            const SelectField = () => {
                const fieldValues = useDigitFormField("language");
                return (
                    <DigitSelect
                        {...fieldValues}
                        filled
                        valueToTextMap={{ sv: "Swedish", en: "English" }}
                        upperLabel="Language"
                    />
                );
            };
            const RadioButtonGroup = () => {
                const radioValues = useDigitFormField("radio");
                return (
                    <DigitRadioButtonGroup
                        {...radioValues}
                        upperLabel="Do you want cake?"
                        radioButtons={[
                            { id: "yes", label: "Yes" },
                            { id: "no", label: "No" }
                        ]}
                    />
                );
            };
            return (
                <DigitForm
                    initialValues={{ name: "Theodor", language: "sv" }}
                    onSubmit={values => {
                        console.log(values);
                    }}
                    render={() => (
                        <DigitLayout.Column size={{ width: "320px" }}>
                            <TextField />
                            <SelectField />
                            <RadioButtonGroup />
                            <DigitButton
                                raised
                                submit
                                onSubmit={values => console.log(values)}
                                text="Submit"
                            />
                        </DigitLayout.Column>
                    )}
                    validationSchema={yup.object().shape({
                        name: yup.string()
                    })}
                ></DigitForm>
            );
        }}
    </Story>
</Canvas>

## Props

| **Name**              | **Type** | **Default value**                                      | **Description**                                                               |
| --------------------- | -------- | ------------------------------------------------------ | ----------------------------------------------------------------------------- |
| **name**              | _string_ |                                                        | The name for the field                                                        |
| **valueFieldName**    | _string_ | "value"                                                | The prop name for value (e.g. value, checked)                                 |
| **getValueFromEvent** | _func_   | func that gets value or checked value from e.target.\* | A function to extract a value from a onChange function to the actually value. |
