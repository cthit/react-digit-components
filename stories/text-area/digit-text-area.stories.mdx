import { Fragment, useState } from "react";
import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import {
    DigitTextArea,
    DigitForm,
    DigitFormField,
    DigitEditData,
    DigitLayout,
    DigitButton
} from "../../src";
import * as yup from "yup";

# DigitTextArea

A text area to input text.

The `DigitTextArea` is uncontrolled, meaning you have to manage the value and change the value when the `DigitTextArea` recieves change. However, if you use `DigitForm`, you don't have to worry about it.

<Meta title="Elements|DigitTextArea" component={DigitTextArea} />

## Flat text area

<Preview>
    <Story name="Flat text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Must be capitalized"
                />
            );
        }}
    </Story>
    <Story name="Disabled flat text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    disabled
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="This is disabled"
                />
            );
        }}
    </Story>
    <Story name="Max length flat text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    maxLength={30}
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                />
            );
        }}
    </Story>
</Preview>

<Preview>
    <Story name="Password flat text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    password
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Password"
                />
            );
        }}
    </Story>
    <Story name="Error flat text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    error
                    errorMessage="Oh no"
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Enter your name"
                />
            );
        }}
    </Story>
</Preview>

## Outlined text area

<Preview>
    <Story name="Outlined text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Must be capitalized"
                    outlined
                />
            );
        }}
    </Story>
    <Story name="Disabled outlined text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    disabled
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="This is disabled"
                    outlined
                />
            );
        }}
    </Story>
    <Story name="Max length outlined text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    maxLength={30}
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    outlined
                />
            );
        }}
    </Story>
</Preview>

<Preview>
    <Story name="Password outlined text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    password
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Password"
                    outlined
                />
            );
        }}
    </Story>
    <Story name="Error outlined text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    error
                    errorMessage="Oh no"
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Enter your name"
                    outlined
                />
            );
        }}
    </Story>
</Preview>

## Filled text area

<Preview>
    <Story name="Filled text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Must be capitalized"
                    filled
                />
            );
        }}
    </Story>
    <Story name="Disabled filled text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    disabled
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="This is disabled"
                    filled
                />
            );
        }}
    </Story>
    <Story name="Max length filled text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    maxLength={30}
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    filled
                />
            );
        }}
    </Story>
</Preview>

<Preview>
    <Story name="Password filled text field">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    password
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Password"
                    filled
                />
            );
        }}
    </Story>
    <Story name="Error filled text field">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    error
                    errorMessage="Oh no"
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Name"
                    lowerLabel="Enter your name"
                    filled
                />
            );
        }}
    </Story>
</Preview>

## Rows

<Preview>
    <Story name="One row text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="One row"
                    lowerLabel="Must be capitalized"
                    rows={1}
                /> 
            );
        }}
    </Story>
    <Story name="Max three rows text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    maxLength={30}
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Two rows"
                    lowerLabel="Maximum three rows"
                    rows={2}
                    rowsMax={3}
                    outlined
                />
            );
        }}
    </Story>
    <Story name="Six rows text area">
        {() => {
            const [text, setText] = useState("");
            return (
                <DigitTextArea
                    value={text}
                    onChange={e => setText(e.target.value)}
                    upperLabel="Six rows"
                    rows={6}
                    filled
                />
            );
        }}
    </Story>
</Preview>

## How to use with DigitForm

<Preview>
    <Story name="DigitTextArea and DigitForm">
        <DigitForm
            render={() => (
                <DigitLayout.Size width="300px">
                    <DigitLayout.Column>
                        <DigitFormField
                            name="firstName"
                            component={DigitTextArea}
                            componentProps={{
                                outlined: true,
                                upperLabel: "First name"
                            }}
                        />
                        <DigitButton submit text="Send" />
                    </DigitLayout.Column>
                </DigitLayout.Size>
            )}
            validationSchema={yup.object().shape({
                firstName: yup.string().required()
            })}
            initialValues={{
                firstName: ""
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
        />
    </Story>
</Preview>

## How to use with DigitEditData

<Preview>
    <Story name="DigitTextArea and DigitEditData">
        <DigitEditData
            initialValues={{
                firstName: ""
            }}
            onSubmit={(values, actions) => {
                console.log(values);
                actions.resetForm();
            }}
            validationSchema={yup.object().shape({
                firstName: yup.string().required()
            })}
            keysOrder={["firstName"]}
            keysComponentData={{
                firstName: {
                    component: DigitTextArea,
                    componentProps: {
                        filled: true,
                        upperLabel: "Firstname"
                    }
                }
            }}
            titleText="Your name"
            submitText="Send"
        />
    </Story>
</Preview>

<Props of={DigitTextArea} />
